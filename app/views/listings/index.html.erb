<h1 class="display-1">Listings</h1>

<%= link_to('New Listing', new_listing_path, class: "btn btn-primary") %>

<%= search_form_for @q do |f| %>
  <%= f.label :Mod %>
  <%= f.select(:modifications_name_eq, @mod_names.collect {|mod| [mod, mod]}) %>
  <%= f.submit "Search" %>
  <% end %>

<% if Listing.all.length > 0 %>
<% @listings.each do |listing| %>
<div class="card" style="width: 18rem;">
  <%= cl_image_tag listing.car_images_attachments.first.key , crop:'scale', width: 150, cloud_name: ENV['CLOUDINARY_CLOUD_NAME'] %>
  <div class="card-body">
    <h5 class="card-title"><%= listing.year%> <%= listing.car.make %> <%= listing.car.model %></h5>
    <p class="card-text"><%= listing.description %></p>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">$<%= listing.price / 100 %></li>
    <li class="list-group-item"><%= listing.color.capitalize %></li>
    <li class="list-group-item"><%= listing.profile.address.state %> <%= listing.profile.address.postcode %></li>
  </ul>
  <div class="card-body">
    <%= link_to "View listing", listing %>
  </div>
</div>
<% end %>
<% end %>

